version : 2

sources : 
  - name : raw
    schema : gz_raw_data
    description : Greenweez raw data source
    tables : 
      - name : sales
        freshness : 
          warn_after : {count : 90, period : day}
        loaded_at_field : "CAST(date_date AS TIMESTAMP)"
        identifier : raw_gz_sales
        description : All Greenweez sales between April 1st and September 30th 2021
        columns : 
          - name : date_date
            description : date on which each order have been made
          - name : CONCAT(orders_id, "_", pdt_id)
            description : Concatenation of orders_id and products_id to get our primary key
            tests : 
              - unique
              - not_null
          - name : orders_id
            description : ID given to each order
          - name : products_id
            description : ID of each product ordered
          - name : revenue
            description : revenue generated by each order
          - name : quantity
            description : quantity ordered of each product
      - name : product
        identifier : raw_gz_product
        description : Greenweez product catalogue 
        columns : 
          - name : products_id
            description : id for each product (= primary key)
            tests : 
              - unique
              - not_null
          - name : purchase_price
            description : The price that Greenweez have to pay for each product they're selling
      - name : ship
        identifier : raw_gz_ship
        description : shipments relative to each orders
        columns : 
          - name : orders_id
            description : unique ID given to each order (= primary key)
            tests : 
              - unique
              - not_null
          - name : shipping_fee
            description : fees paid by the customer to get his order ship
          - name : logcost
            description : logistic cost relative to each order
          - name : ship_cost
            description : shipping cost relative to each order